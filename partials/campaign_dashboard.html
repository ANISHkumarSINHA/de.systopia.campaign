<div id="campaign_container">
   <div id="campaign_summary">
      <h1>{{currentCampaign.title}} {{currentCampaign.is_active === "1" ? "" : "(INACTIVE)"}}</h1>
      <div id="breadcrumb">
         <div class="parents" ng-show="numberof.parents > 0">
            Parent Campaign(s) [{{numberof.parents}}]
           <!-- parents -->
           <a ng-repeat-start="(key, value) in parents | orderBy:'$index':true" href="#/campaign/{{value.id}}/view" ng-if="numberof.parents > 0">{{value.title}}</a> <span ng-repeat-end>&gt; </span>
           <!-- current -->
           <a href="#/campaign/{{currentCampaign.id}}/view" class="current">{{currentCampaign.title}}</a>
         </div>
         <div class="children" ng-if="numberof.children > 0">
            Child Campaign(s) [{{numberof.children}}]
           <!-- children -->
           <a ng-repeat-start="(key, value) in children" href="#/campaign/{{key}}/view">{{value}}</a> <span ng-repeat-end ng-if="!$last">| </span>
         </div>
      </div>
      <div id="actions">
        <a href="{{tree_link}}" class="button">View Campaign Tree</a>
        <a href="{{edit_link}}" class="button">Edit Campaign</a>
        <a href="{{subcampaign_link}}" class="button">Create Subcampaign</a>
      </div>
      <div id="info">
         <table class="cmpinfo">
           <tr>
             <td>External Identifier</td>
             <td>{{currentCampaign.external_identifier ? currentCampaign.external_identifier : "-"}}</td>
           </tr>
           <tr>
             <td>Start date</td>
             <td>{{currentCampaign.start_date ? currentCampaign.start_date_date : "-"}}</td>
           </tr>
           <tr>
             <td>End date</td>
             <td>{{currentCampaign.end_date ? currentCampaign.end_date_date : "-"}}</td>
           </tr>
         </table>
      </div>
   </div>

   <div crm-ui-accordion="{title: ts('Campaign Information'), collapsed: true}" >
      <div class="label">Description</div>
      <div class="content">
         <textarea id="campaign_description"
         ng-model="currentCampaign.description"
         readonly></textarea>
      </div>
      <div class="clear"></div>

      <div class="label" ng-if="currentCampaign.goal_general_htmlSafe">Goal</div>
      <div class="goalContent" ng-bind-html="currentCampaign.goal_general_htmlSafe"></div>
      <div class="clear"></div>
   </div>

   <div crm-ui-accordion="{title: ts('Key Performance Indicators')}" >
      <table class="kpitable">
        <tr ng-repeat="(key, value) in kpi">
          <td>{{value.title}}</td>
          <td>{{value.value}}</td>
        </tr>
      </table>
   </div>

   <div crm-ui-accordion="{title: ts('Campaign Expenses')}" >
      <table class="expsumtable">
        <tr ng-repeat="(key, value) in expenseSum">
          <td>Total Costs ({{key}})</td>
          <td>{{value}}</td>
        </tr>
      </table>
      <table class="exptable">
         <tr>
            <th>Amount</th>
            <th>Currency</th>
            <th>Description</th>
            <th>Date</th>
            <th>Actions</th>
         </tr>
         <tr ng-repeat="(id, expense) in expenses">
            <td>{{expense.amount}}</td>
            <td>{{expense.currency}}</td>
            <td>{{expense.description ? (expense.description | limitTo : 15) : ('-')}}{{expense.description.length > 15 ? '...' : ''}}</td>
            <td>{{expense.created_date}}</td>
            <td>todo</td>
         </tr>
      </table>
   </div>

</div>
